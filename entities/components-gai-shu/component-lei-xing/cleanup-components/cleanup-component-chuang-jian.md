# cleanup component创建

要创建一个清理组件，请创建一个继承自 `ICleanupComponentData` 的结构体。确保在运行时将其添加到实体，因为清理组件无法被烘焙。

以下代码示例显示了一个空的清理组件：

```csharp
public struct ExampleCleanupComponent : ICleanupComponentData
{

}
```

### 注意事项

空的清理组件通常已经足够，但你可以添加属性来存储清理目标原型所需的信息。

### 执行清理

你可以使用清理组件来帮助管理需要在销毁时进行清理的实体。Unity 防止你销毁包含清理组件的实体。

当你尝试销毁附有清理组件的实体时，Unity 会移除所有非清理组件。实体仍然存在，直到你从中移除所有清理组件。

要对特定原型的实体执行清理：

1. **创建一个新的标签组件并将其添加到原型中**。
2. **创建一个新的清理组件，包含清理特定实体原型所需的信息**。
3. **创建一个系统，该系统**：
   * 获取新创建的目标原型实体。这些实体包含标签组件但不包含清理组件。
   * 将清理组件添加到这些实体中。
4. **创建一个系统来处理清理组件的移除**：
   * 在 `OnUpdate` 中，处理在运行时需要清理的实体：
     * 获取已被临时销毁并需要清理的实体。这些实体包含清理组件，但不包含标签组件。
     * 为这些实体执行适当的清理工作。
     * 从实体中移除相关的清理组件。
   * 在 `OnDestroy` 中，处理在关闭时需要清理的实体：
     * 获取所有包含清理组件的实体，包括那些仍然具有标签组件的实体。
     * 为这些实体执行适当的清理工作。
     * 从实体中移除相关的清理组件。
