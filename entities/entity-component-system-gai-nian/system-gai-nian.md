# System概念

&#x20;系统提供将组件数据从当前状态转换到下一状态的逻辑。例如，系统可以通过速度乘以自上次更新以来的时间间隔来更新所有移动实体的位置。

系统在主线程上每帧运行一次。系统组织成系统组的层次结构，可以用来组织系统应该更新的顺序。

你可以在 Entities 中创建托管或未管理的系统。要定义托管系统，请创建继承自 `SystemBase` 的类。要定义未管理系统，请创建继承自 `ISystem` 的结构体。有关更多信息，请参阅系统概述。

`ISystem` 和 `SystemBase` 都有三个可以重写的方法：`OnUpdate`、`OnCreate` 和 `OnDestroy`。系统的 `OnUpdate` 方法每帧执行一次。

一个系统只能处理一个世界中的实体，因此系统与特定的世界关联。可以使用 `World` 属性返回系统附加的世界。

默认情况下，自动引导过程会创建每个系统和系统组的实例。引导过程创建一个包含三个系统组的默认世界：`InitializationSystemGroup`、`SimulationSystemGroup` 和 `PresentationSystemGroup`。默认情况下，会将系统实例添加到 `SimulationSystemGroup`。可以使用 `[UpdateInGroup]` 属性覆盖此行为。

要禁用自动引导过程，请使用脚本定义 `#UNITY_DISABLE_AUTOMATIC_SYSTEM_BOOTSTRAP`。

#### 系统类型

你可以使用几种不同类型的系统：

* **SystemBase**: 提供托管系统的基类。
* **ISystem**: 提供未管理系统的接口。
* **EntityCommandBufferSystem**: 为其他系统提供实体命令缓冲区实例。这允许你将结构变化分组在一起，以提高应用程序的性能。
* **ComponentSystemGroup**: 提供系统的嵌套组织和更新顺序。

#### 系统组

系统组可以将系统和其他系统组作为其子级。系统组有一个可以重写的更新方法，基本方法按排序顺序更新组的子级。

有关更多信息，请参阅系统组的文档。

#### 检查系统

可以使用系统窗口检查每个世界中系统的更新顺序，并查看系统组的完整层次结构。有关更多信息，请参阅系统窗口参考的文档。

#### 编辑器中的系统

在编辑器中，以下图标代表不同类型的系统。当使用特定的实体窗口和检查器时，会看到这些图标。

| 图标 | 代表                                          |
| -- | ------------------------------------------- |
|    | 一个系统组                                       |
|    | 一个系统                                        |
|    | 一个实体命令缓冲区系统，设置为在系统组的开始执行（使用 OrderFirst 参数）。 |
|    | 一个实体命令缓冲区系统，设置为在系统组的末尾执行（使用 OrderLast 参数）。  |
